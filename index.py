import random
import os


def read():
    with open('./words.txt', 'r', encoding="utf-8") as f:
        words = [word.strip('\n') for word in f]
    return words


def write():
    try:
        word = str(input("Add a word:"))
        with open('./words.txt', 'a', encoding="utf-8") as f:
            f.write(f'\n{word}')
            f.close()
            print("""
                ----------------------------------------------------------------------------------
                ░█████╗░██████╗░██████╗░███████╗██████╗░  ░██╗░░░░░░░██╗░█████╗░██████╗░██████╗░
                ██╔══██╗██╔══██╗██╔══██╗██╔════╝██╔══██╗  ░██║░░██╗░░██║██╔══██╗██╔══██╗██╔══██╗
                ███████║██║░░██║██║░░██║█████╗░░██║░░██║  ░╚██╗████╗██╔╝██║░░██║██████╔╝██║░░██║
                ██╔══██║██║░░██║██║░░██║██╔══╝░░██║░░██║  ░░████╔═████║░██║░░██║██╔══██╗██║░░██║
                ██║░░██║██████╔╝██████╔╝███████╗██████╔╝  ░░╚██╔╝░╚██╔╝░╚█████╔╝██║░░██║██████╔╝
                ╚═╝░░╚═╝╚═════╝░╚═════╝░╚══════╝╚═════╝░  ░░░╚═╝░░░╚═╝░░░╚════╝░╚═╝░░╚═╝╚═════╝░
                ----------------------------------------------------------------------------------""")
    except:
        print("error")


def play():
    word = random.choice(read())
    letters = []
    keyboard_letter = ''
    count_letters = 0
    attempt_counter = 0
    failed_attempts = 0

    while True:
        os.system("cls")
        print(f'Attempts: {attempt_counter}')
        print(HANGMAN()[failed_attempts])
        for i in word:
            if keyboard_letter != '' or count_letters > 0:
                if i in letters:
                    print(f'  {i}', end='')
                else:
                    print("  _", end='')
            else:
                print("  _", end='')

        if count_letters != len(word):
            print('\n')
            keyboard_letter = str(input('Type the letter: '))
            attempt_counter += 1
            if len(keyboard_letter) == 1:
                if word.find(keyboard_letter) >= 0 and keyboard_letter not in letters:
                    count_letters += word.count(keyboard_letter)
                    letters.append(keyboard_letter)
                else:
                    failed_attempts += 1
            else:
                failed_attempts += 1

            if failed_attempts > 6:
                print("""
                    -------------------------------------------------------------------------
                    ░██████╗░░█████╗░███╗░░░███╗███████╗  ░█████╗░██╗░░░██╗███████╗██████╗░
                    ██╔════╝░██╔══██╗████╗░████║██╔════╝  ██╔══██╗██║░░░██║██╔════╝██╔══██╗
                    ██║░░██╗░███████║██╔████╔██║█████╗░░  ██║░░██║╚██╗░██╔╝█████╗░░██████╔╝
                    ██║░░╚██╗██╔══██║██║╚██╔╝██║██╔══╝░░  ██║░░██║░╚████╔╝░██╔══╝░░██╔══██╗
                    ╚██████╔╝██║░░██║██║░╚═╝░██║███████╗  ╚█████╔╝░░╚██╔╝░░███████╗██║░░██║
                    ░╚═════╝░╚═╝░░╚═╝╚═╝░░░░░╚═╝╚══════╝  ░╚════╝░░░░╚═╝░░░╚══════╝╚═╝░░╚═╝
                    -------------------------------------------------------------------------""")
                break
        else:
            print("""
                -------------------------------------------------------------------------------------------------------------------------
                ░█████╗░░█████╗░███╗░░██╗░██████╗░██████╗░░█████╗░████████╗██╗░░░██╗██╗░░░░░░█████╗░████████╗██╗░█████╗░███╗░░██╗░██████╗
                ██╔══██╗██╔══██╗████╗░██║██╔════╝░██╔══██╗██╔══██╗╚══██╔══╝██║░░░██║██║░░░░░██╔══██╗╚══██╔══╝██║██╔══██╗████╗░██║██╔════╝
                ██║░░╚═╝██║░░██║██╔██╗██║██║░░██╗░██████╔╝███████║░░░██║░░░██║░░░██║██║░░░░░███████║░░░██║░░░██║██║░░██║██╔██╗██║╚█████╗░
                ██║░░██╗██║░░██║██║╚████║██║░░╚██╗██╔══██╗██╔══██║░░░██║░░░██║░░░██║██║░░░░░██╔══██║░░░██║░░░██║██║░░██║██║╚████║░╚═══██╗
                ╚█████╔╝╚█████╔╝██║░╚███║╚██████╔╝██║░░██║██║░░██║░░░██║░░░╚██████╔╝███████╗██║░░██║░░░██║░░░██║╚█████╔╝██║░╚███║██████╔╝
                ░╚════╝░░╚════╝░╚═╝░░╚══╝░╚═════╝░╚═╝░░╚═╝╚═╝░░╚═╝░░░╚═╝░░░░╚═════╝░╚══════╝╚═╝░░╚═╝░░░╚═╝░░░╚═╝░╚════╝░╚═╝░░╚══╝╚═════╝░
                -------------------------------------------------------------------------------------------------------------------------""")
            break


def HANGMAN():
    return [
        '''  
      +---+
      |   |
          |
          |
          |
          |
    =========''',
        '''
      +---+
      |   |
      O   |
          |
          |
          |
    =========''',
        '''
      +---+
      |   |
      O   |
      |   |
          |
          |
    =========''',
        '''
      +---+
      |   |
      O   |
     /|   | 
          |
          |
    =========''',
        '''
      +---+
      |   |
      O   |
     /|\  |
          |
          |
    =========''',
        '''
      +---+
      |   |
      O   |
     /|\  |
     /    |
          |
    =========''',
        '''
      +---+
      |   |
      O   |
     /|\  |
     / \  |
          |
    ========='''
    ]


def menu():
    os.system('cls')
    option = 0
    print(
        """
        -----------------------------------------------------------------------------------------------------    
        ██╗░░██╗░█████╗░███╗░░██╗░██████╗░███╗░░░███╗░█████╗░███╗░░██╗  ░██████╗░░█████╗░███╗░░░███╗███████╗
        ██║░░██║██╔══██╗████╗░██║██╔════╝░████╗░████║██╔══██╗████╗░██║  ██╔════╝░██╔══██╗████╗░████║██╔════╝
        ███████║███████║██╔██╗██║██║░░██╗░██╔████╔██║███████║██╔██╗██║  ██║░░██╗░███████║██╔████╔██║█████╗░░
        ██╔══██║██╔══██║██║╚████║██║░░╚██╗██║╚██╔╝██║██╔══██║██║╚████║  ██║░░╚██╗██╔══██║██║╚██╔╝██║██╔══╝░░
        ██║░░██║██║░░██║██║░╚███║╚██████╔╝██║░╚═╝░██║██║░░██║██║░╚███║  ╚██████╔╝██║░░██║██║░╚═╝░██║███████╗
        ╚═╝░░╚═╝╚═╝░░╚═╝╚═╝░░╚══╝░╚═════╝░╚═╝░░░░░╚═╝╚═╝░░╚═╝╚═╝░░╚══╝  ░╚═════╝░╚═╝░░╚═╝╚═╝░░░░░╚═╝╚══════╝
        -----------------------------------------------------------------------------------------------------""")
    while option != 3:
        if option == 1:
            play()
            option = 0
        elif option == 2:
            write()
            option = 0
        else:

            if option < 0 or option > 3:

                print("""
                ===================
                  Invalid option
                ===================""")
            print("""
              ===================
              1. Play 
              2. Add word
              3. Exit
              ===================""")

            try:
                option = int(input("Write your option: "))
                os.system('cls')

            except:
                print("""
                =========================
                 Letters are not allowed
                =========================
                """)

    print("""
                    
                ████████╗██╗░░██╗░█████╗░███╗░░██╗██╗░░██╗░██████╗  ███████╗░█████╗░██████╗░
                ╚══██╔══╝██║░░██║██╔══██╗████╗░██║██║░██╔╝██╔════╝  ██╔════╝██╔══██╗██╔══██╗
                ░░░██║░░░███████║███████║██╔██╗██║█████═╝░╚█████╗░  █████╗░░██║░░██║██████╔╝
                ░░░██║░░░██╔══██║██╔══██║██║╚████║██╔═██╗░░╚═══██╗  ██╔══╝░░██║░░██║██╔══██╗
                ░░░██║░░░██║░░██║██║░░██║██║░╚███║██║░╚██╗██████╔╝  ██║░░░░░╚█████╔╝██║░░██║
                ░░░╚═╝░░░╚═╝░░╚═╝╚═╝░░╚═╝╚═╝░░╚══╝╚═╝░░╚═╝╚═════╝░  ╚═╝░░░░░░╚════╝░╚═╝░░╚═╝

                            ██████╗░██╗░░░░░░█████╗░██╗░░░██╗██╗███╗░░██╗░██████╗░
                            ██╔══██╗██║░░░░░██╔══██╗╚██╗░██╔╝██║████╗░██║██╔════╝░
                            ██████╔╝██║░░░░░███████║░╚████╔╝░██║██╔██╗██║██║░░██╗░
                            ██╔═══╝░██║░░░░░██╔══██║░░╚██╔╝░░██║██║╚████║██║░░╚██╗
                            ██║░░░░░███████╗██║░░██║░░░██║░░░██║██║░╚███║╚██████╔╝
                            ╚═╝░░░░░╚══════╝╚═╝░░╚═╝░░░╚═╝░░░╚═╝╚═╝░░╚══╝░╚═════╝░

                  """)


if __name__ == '__main__':
    menu()
